<!-- This code adds an emoji favicon to the webpage. -->
<!DOCTYPE html>
<html>

<head>
  <title>essay</title>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@200;400&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #1A1919;
      margin: 0;
      padding: 0;
    }

    .ql-editor {
      font-family: 'Source Code Pro', monospace;
      font-size: 16px;
      font-weight: 200;
      color: white
    }

    .ql-anchor-title {
      font-weight: 400 !important;
    }


    #editor-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      width: 100vw;
    }

    /* Remove the border */
    .ql-container.ql-snow {
      border: none;
    }

    #editor {
      width: 700px;
    }
  </style>

</head>

<body>
  <div id="editor-container">
    <div id="editor"></div>
  </div>

  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
    // Initialize Quill
    var quill = new Quill('#editor', {
      theme: 'snow',
      modules: {
        toolbar: false
      }
    });

    console.log("Quill initialized");  // Debugging log

    quill.on('text-change', function (delta, oldDelta, source) {
      if (source === 'user') {
        const text = quill.getText();
        const lines = text.split('\n');
        const editor = document.querySelector('.ql-editor');
        const children = Array.from(editor.childNodes);

        children.forEach((child, index) => {
          if (lines[index] && lines[index].startsWith('$')) {
            child.classList.add('ql-anchor-title');
          } else {
            child.classList.remove('ql-anchor-title');
          }
        });
      }
    });

    // Load content from localStorage if available
    const savedContent = localStorage.getItem('autosave');
    if (savedContent) {
      console.log("Loading from localStorage:", savedContent);
      quill.setContents(JSON.parse(savedContent));
    } else {
      console.log("No saved content in localStorage");
    }

    let saveInterval = 5000; // Save every 5 seconds
    let timeoutId;

    quill.on('text-change', function (delta, oldDelta, source) {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(function () {
        const content = quill.getContents();
        console.log("Saving to localStorage:", content);
        localStorage.setItem('autosave', JSON.stringify(content));
      }, saveInterval);
    });

  </script>
</body>

</html>